From 8b8b7bf8eb651c56d6e85101d9ff277155981cb3 Mon Sep 17 00:00:00 2001
From: Sumit Bose <sbose@redhat.com>
Date: Wed, 18 May 2016 14:42:46 +0200
Subject: [PATCH] Fix invalid unrefs on realm_invocation_get_cancellable()
 retval

https://bugzilla.redhat.com/show_bug.cgi?id=1330766

Signed-off-by: Stef Walter <stefw@redhat.com>
---
 service/realm-packages.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/service/realm-packages.c b/service/realm-packages.c
index 321921a..9a6984c 100644
--- a/service/realm-packages.c
+++ b/service/realm-packages.c
@@ -479,8 +479,6 @@ on_install_resolved (GObject *source,
 			packages_install_async (install->connection,
 			                        (const gchar **)package_ids, cancellable,
 			                        on_install_installed, g_object_ref (task));
-			if (cancellable)
-				g_object_unref (cancellable);
 		}
 
 		g_free (missing);
@@ -649,7 +647,6 @@ realm_packages_install_async (const gchar **package_sets,
 		cancellable = realm_invocation_get_cancellable (install->invocation);
 		packages_resolve_async (connection, (const gchar **)install->packages, cancellable,
 		                        on_install_resolved, g_object_ref (task));
-		g_object_unref (cancellable);
 	}
 
 	g_object_unref (task);
-- 
2.7.4

